---
title: 代码备忘
date: 2016-06-03 11:55:18
tags:

---

#### 1、自己封装的数组转json函数
```
var serializeJson = function(html_id){
            var formData = $('#add-app-form').serializeArray();
            var formJson = {};
            for (var i = 0; i < formData.length; i++) {
                formJson[formData[i].name] = formData[i].value;
            };
            return formJson;
        }
var formJson = serializeJson("#add-app-form");
```

#### 2、字符串到json:

```
JSON.parse(data);
```

#### 3、json到字符串：

```
JSON.stringify(data);
```

#### 4、判断checkbox是否选中：  
```
console.log($("#managePlatform").is(":checked"));
```

#### 5、confirmModel('是否重置该雇员密码？',resetPassword,obj);

#### 6、自己封装的angular复选框

1. 对页面的处理

```
<input type="checkbox" ng-model="lists.checkAllState" ng-click="checkBox('all')">
<input  type="checkbox" ng-model="list.checkState" ng-click="checkBox('one')">
```

2. 对列表的处理

```
$scope.lists = checkBoxService.addCheckBox($scope.lists);
```

3. 选择函数

```
    $scope.checkArray = [];
    $scope.checkBox = function(status){
    $scope.checkArray = checkBoxService.checkBox($scope.lists,status);
      console.log($scope.checkArray);
    }
```

4. 封装服务

```
.service('checkBoxService', function(toastr){//通用的提示信息
    return{
        addCheckBox:function(list){
            for(var i=0; i<list.length; i++){// 多选框赋值
              list[i].checkState = false;
            }
            list.checkAllState = false;
            return list;
        },
        checkBox:function(list,status){
            var checkArray = [];
            if(status == 'one'){
                for(var i=0; i<list.length; i++){
                  if(list[i].checkState == true){
                    checkArray.push(i);
                  }
                }
            }else if(status == 'all'){
                for(var i=0; i<list.length; i++){
                    list[i].checkState = list.checkAllState;
                    if(list[i].checkState == true){
                      checkArray.push(i);
                    }
                  }
            }   
              if(checkArray.length == list.length){
              list.checkAllState = true;
            }else{
              list.checkAllState = false;
            }
              return checkArray;
        }
    }
})
```

### 7、JS获取浏览器地址栏参数

```
function GetQueryString(name)
{
     var reg = new RegExp("(^|&)"+ name +"=([^&]*)(&|$)");
     var r = window.location.search.substr(1).match(reg);
     if(r!=null)return  unescape(r[2]); return null;
}
// 调用方法
//var public_orgId = GetQueryString("orgId");//公共用的组织ID
//var public_orgCode = GetQueryString("orgCode");//公共用的组织OrgID
```

### 8、本地存储

```
设值：
localStorage.setItem("hello", "world");
localStorage.setItem("zhangsan", "lisi");
取值：
localStorage.getItem("hello");
localStorage.getItem("zhangsan");
```







